<!DOCTYPE html>
<html lang="id" class="dark">

<head>
    <meta charset="utf-8" />
    <title>Tikor ODC ‚Äî Telkom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="theme-color" content="#dc2626" />
    <link rel="manifest" href="manifest.json" />

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Routing -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.min.js"></script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Excel -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

    <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-gray-100 dark:bg-gray-900 dark:text-white">

    <!-- LOGIN -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h2 class="text-xl font-bold mb-4 text-center">LOGIN SYSTEM</h2>

            <input id="loginUser" placeholder="Username" class="input" />
            <input id="loginPass" type="password" placeholder="Password" class="input" />

            <select id="loginRole" class="input">
        <option value="admin">Admin</option>
        <option value="teknisi">Teknisi</option>
      </select>

            <button onclick="doLogin()" class="btn-login">MASUK</button>

            <p class="text-xs text-center mt-3 text-gray-400">
                Admin : admin / 12345<br /> Teknisi : teknisi / 11111
            </p>
        </div>
    </div>

    <!-- HEADER -->
    <header class="bg-red-600 p-3 text-white flex justify-between items-center sticky top-0 z-50">
        <b>Tikor ODC</b>
        <div class="flex gap-2">
            <button onclick="exportExcel()" class="btn">Excel</button>
            <button onclick="toggleDark()" class="btn">üåô</button>
            <button onclick="logout()" class="btn">Logout</button>
        </div>
    </header>

    <!-- SEARCH -->
    <div class="p-3 bg-white dark:bg-gray-800 flex gap-2">
        <input id="qSearch" placeholder="Cari ODC..." class="input w-full" />
        <button onclick="doSearch()" class="btn">Cari</button>
    </div>

    <!-- MENU -->
    <div class="flex justify-center gap-3 p-3 bg-white dark:bg-gray-800">
        <button class="menu-btn" onclick="showMenu('mapMenu')">Peta</button>
        <button class="menu-btn" onclick="showMenu('tableMenu')">Daftar</button>
        <button class="menu-btn" onclick="showMenu('formMenu')" id="btnForm">Tambah</button>
    </div>

    <!-- MAP -->
    <section id="mapMenu" class="menu-section">
        <div class="flex gap-2 mb-2">
            <button onclick="locateMe()" class="btn">üìç Lokasi Saya</button>

            <select id="navMode" class="input w-40">
        <option value="driving">üöó Mobil</option>
        <option value="motorcycle">üèç Motor</option>
        <option value="walking">üö∂ Jalan</option>
      </select>

            <button onclick="clearRoute()" class="btn bg-gray-600">‚ùå Rute</button>
        </div>

        <div id="map"></div>
    </section>

    <!-- TABLE -->
    <section id="tableMenu" class="menu-section hidden">
        <table class="w-full text-sm border">
            <thead class="bg-gray-200 dark:bg-gray-700">
                <tr>
                    <th>Nama</th>
                    <th>Kode</th>
                    <th>Lokasi</th>
                    <th>Latitude</th>
                    <th>Longitude</th>
                    <th>Foto</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody id="dataTable"></tbody>
        </table>
    </section>

    <!-- FORM -->
    <section id="formMenu" class="menu-section hidden">
        <input id="nama" placeholder="Nama ODC" class="input" />
        <input id="kode" placeholder="Kode ODC" class="input" />
        <input id="lokasi" placeholder="Lokasi" class="input" />
        <input id="lat" placeholder="Latitude" class="input" />
        <input id="lng" placeholder="Longitude" class="input" />
        <input id="foto" type="file" accept="image/*" capture="environment" class="input" />

        <div class="flex gap-2">
            <button onclick="simpan()" class="btn bg-green-600 w-full">Simpan</button>
            <button onclick="fillWithMyLocation()" class="btn bg-gray-600 w-full">GPS</button>
        </div>
    </section>

    <script src="app.js"></script>
</body>

</html>